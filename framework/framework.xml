<?xml version="1.0" encoding="UTF-8"?>
<data>
  <action>
    WND = {};
      WND.window_factory = new com.davidmaletz.mining.ui.WindowFactory();
      WND.label_factory = new com.davidmaletz.mining.ui.LabelFactory(false);
  	  WND.icon_factory = new com.davidmaletz.mining.ui.LabelFactory(true);
  		WND.button_factory = new com.davidmaletz.mining.ui.MyButtonFactory();

    function getContainer(){
    if(getLocalPlayer() == null) throw "Window Framework : Failed to obtain container!";
    return (getLocalPlayer != null) ? getLocalPlayer().renderer.stage.getChildAt(0).getChildAt(0).getChildAt(1) : null;
    }
    function createAncientWindow(width,height,close){
      var a = new com.davidmaletz.controls.ClickableWindow(getContainer(),WND.window_factory.create(width,height),true,false,false);
      if(close == true){
      var close = new com.davidmaletz.controls.CloseButton(a,a.getWidth(),0);
      a.addChild(close);
      a.clickables.clickables.addClickable(close,this,1);
      }
      return a;
    }

// a = new com.davidmaletz.controls.ClickableWindow(c,new com.davidmaletz.tiles.TileDrawable(Tile.get("nav.bg.star")),true,false,false);
// var b = new com.davidmaletz.mining.ui.TextButton(4,20,getText("common.ok"),function(){trace("OK!");}))
// a.addChild(b)
// a.clickables.clickables.addClickable(b,a,1)
// c.addDisplay(a)
// a = new com.davidmaletz.controls.ClickableWindow(c,your.window.factory.instance.create(100,100),true,false,false);

  </action>
  <include id="map.xml"/>
  <onLoad>
    <action>

    </action>
  </onLoad>
</data>
